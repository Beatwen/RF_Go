"use strict";(self.webpackChunkrf_go_docs=self.webpackChunkrf_go_docs||[]).push([[8945],{6167:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"uml-analysis/use-cases/uc-008","title":"UC-008: Authentification et validation de licence","description":"R\xe9sum\xe9 : Ce cas d\'utilisation d\xe9crit le processus complet d\'authentification et de validation de licence depuis le lancement de l\'application, incluant la cr\xe9ation de compte, la connexion, l\'activation de licence et la validation en ligne/hors ligne.","source":"@site/docs/uml-analysis/use-cases/uc-008.md","sourceDirName":"uml-analysis/use-cases","slug":"/uml-analysis/use-cases/uc-008","permalink":"/RF_Go/uml-analysis/use-cases/uc-008","draft":false,"unlisted":false,"editUrl":"https://github.com/Beatwen/RF_Go/tree/main/docs/uml-analysis/use-cases/uc-008.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"UC-007: Gestion temporelle avanc\xe9e","permalink":"/RF_Go/uml-analysis/use-cases/uc-007"},"next":{"title":"UC-010: Gestion des sessions RF","permalink":"/RF_Go/uml-analysis/use-cases/uc-010"}}');var s=n(4848),t=n(8453);const c={},l="UC-008: Authentification et validation de licence",d={},a=[{value:"Acteurs secondaires",id:"acteurs-secondaires",level:2},{value:"Sc\xe9nario nominal - Premier lancement (cr\xe9ation de compte)",id:"sc\xe9nario-nominal---premier-lancement-cr\xe9ation-de-compte",level:2},{value:"Sc\xe9nario nominal - Connexion utilisateur existant",id:"sc\xe9nario-nominal---connexion-utilisateur-existant",level:2},{value:"Sc\xe9nario nominal - Activation de licence",id:"sc\xe9nario-nominal---activation-de-licence",level:2},{value:"Sc\xe9nario nominal - Validation automatique au d\xe9marrage",id:"sc\xe9nario-nominal---validation-automatique-au-d\xe9marrage",level:2},{value:"Sc\xe9narios alternatifs",id:"sc\xe9narios-alternatifs",level:2},{value:"Sc\xe9nario alternatif 1: Mode hors ligne (pas de connexion r\xe9seau)",id:"sc\xe9nario-alternatif-1-mode-hors-ligne-pas-de-connexion-r\xe9seau",level:3},{value:"Sc\xe9nario alternatif 2: Licence invalide ou expir\xe9e",id:"sc\xe9nario-alternatif-2-licence-invalide-ou-expir\xe9e",level:3},{value:"Sc\xe9nario alternatif 3: \xc9chec de cr\xe9ation de compte",id:"sc\xe9nario-alternatif-3-\xe9chec-de-cr\xe9ation-de-compte",level:3},{value:"Sc\xe9nario alternatif 4: Token expir\xe9 lors de l&#39;utilisation",id:"sc\xe9nario-alternatif-4-token-expir\xe9-lors-de-lutilisation",level:3},{value:"Sc\xe9nario alternatif 5: Suppression des donn\xe9es utilisateur",id:"sc\xe9nario-alternatif-5-suppression-des-donn\xe9es-utilisateur",level:3},{value:"Diagramme de s\xe9quence",id:"diagramme-de-s\xe9quence",level:2},{value:"Diagramme d&#39;activit\xe9",id:"diagramme-dactivit\xe9",level:2},{value:"Points d&#39;extension",id:"points-dextension",level:2},{value:"Contraintes techniques",id:"contraintes-techniques",level:2}];function o(e){const i={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"uc-008-authentification-et-validation-de-licence",children:"UC-008: Authentification et validation de licence"})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"R\xe9sum\xe9 :"})," Ce cas d'utilisation d\xe9crit le processus complet d'authentification et de validation de licence depuis le lancement de l'application, incluant la cr\xe9ation de compte, la connexion, l'activation de licence et la validation en ligne/hors ligne."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Acteur :"})," Ing\xe9nieur Son"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Pr\xe9condition :"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Connexion internet disponible (optionnelle pour mode hors ligne sauf pour la premi\xe8re connexion)"}),"\n",(0,s.jsx)(i.li,{children:"Serveur d'authentification et de licences accessible"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Date de cr\xe9ation :"})," 19 mars 2025",(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Version :"})," 1.0"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Post condition :"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"L'utilisateur est authentifi\xe9 et sa licence est valid\xe9e"}),"\n",(0,s.jsx)(i.li,{children:"L'acc\xe8s \xe0 l'application principale est accord\xe9"}),"\n",(0,s.jsx)(i.li,{children:"Les tokens et informations sont stock\xe9s localement"}),"\n",(0,s.jsx)(i.li,{children:"L'\xe9tat de la licence est v\xe9rifi\xe9 et maintenu"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"acteurs-secondaires",children:"Acteurs secondaires"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Serveur d'authentification"})," : Validation des identifiants, g\xe9n\xe9ration de tokens et activation des cl\xe9s de licence"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"SecureStorage local"})," : Stockage s\xe9curis\xe9 des tokens et informations utilisateur"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"AuthService"})," : Service d'authentification et gestion des tokens"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"sc\xe9nario-nominal---premier-lancement-cr\xe9ation-de-compte",children:"Sc\xe9nario nominal - Premier lancement (cr\xe9ation de compte)"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Acteur"}),(0,s.jsx)(i.th,{children:"Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Lance l'application RF.Go"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Ex\xe9cute Redirect.razor en point d'entr\xe9e"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"R\xe9cup\xe8re deviceIdentifier via GUID.GetOrCreateDeviceIdentifier()"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"V\xe9rifie SecureStorage pour userKey, licenseKey, user, token"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"D\xe9tecte l'absence d'userKey"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Redirige vers /register"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Affiche RegisterForm avec champs (FirstName, LastName, Email, Password)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Saisit ses informations personnelles"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Cr\xe9e un mot de passe complexe (8 chars, majuscule, minuscule, chiffre)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Accepte les conditions d'utilisation"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:'Clique "Register"'})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Valide le formulaire (email, force du mot de passe, confirmation)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Appelle AuthService.RegisterAsync(registrationModel)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Envoie requ\xeate POST vers /auth/register avec les donn\xe9es utilisateur"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Serveur"}),(0,s.jsx)(i.td,{children:"Cr\xe9e le compte utilisateur et g\xe9n\xe8re clientId/clientSecret"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Stocke clientId et clientSecret via TokenStorage"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Redirige vers /login?from=register"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:'Affiche message "You just received an email. Please confirm your email and copy your license"'})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"sc\xe9nario-nominal---connexion-utilisateur-existant",children:"Sc\xe9nario nominal - Connexion utilisateur existant"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Acteur"}),(0,s.jsx)(i.th,{children:"Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Lance l'application (userKey pr\xe9sent, token absent)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"D\xe9tecte userKey mais pas de token valide"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Redirige vers /login"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Affiche LoginForm"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Saisit email et mot de passe"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:'Clique "Login"'})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"R\xe9cup\xe8re clientId et clientSecret depuis TokenStorage"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Envoie requ\xeate POST vers /auth/login avec credentials OAuth2"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Inclut headers (X-API-KEY, X-DEVICE-ID, grant_type=password)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Serveur"}),(0,s.jsx)(i.td,{children:"Valide les identifiants et g\xe9n\xe8re accessToken/refreshToken"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Stocke les tokens et informations utilisateur via SecureStorage"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Redirige vers /license (si pas de licenseKey)"})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"sc\xe9nario-nominal---activation-de-licence",children:"Sc\xe9nario nominal - Activation de licence"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Acteur"}),(0,s.jsx)(i.th,{children:"Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Arrive sur /license (apr\xe8s connexion ou userKey sans licence)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:'Affiche page License avec options "Buy a license" et "Activate a license"'})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:'Clique "Activate a license"'})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Affiche ActivationForm"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Saisit la cl\xe9 de licence re\xe7ue par email"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:'Clique "Activate"'})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"R\xe9cup\xe8re accessToken via AuthService.GetValidAccessTokenAsync()"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Envoie POST vers /licenses/activate-and-validate"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Inclut headers (X-API-KEY, X-DEVICE-ID, X-USER-KEY, Authorization Bearer)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Serveur"}),(0,s.jsx)(i.td,{children:"Valide et active la licence pour le deviceId"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Stocke licenseKey dans SecureStorage"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Redirige vers /index (application principale)"})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"sc\xe9nario-nominal---validation-automatique-au-d\xe9marrage",children:"Sc\xe9nario nominal - Validation automatique au d\xe9marrage"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Acteur"}),(0,s.jsx)(i.th,{children:"Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Lance l'application (tous les tokens pr\xe9sents)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"D\xe9tecte userKey, token et licenseKey dans SecureStorage"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Appelle AuthService.GetValidAccessTokenAsync() pour rafra\xeechir si n\xe9cessaire"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Pr\xe9pare headers d'authentification (API-KEY, USER-KEY, DEVICE-ID, LICENSE-KEY)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Envoie POST vers /licenses/validate avec licenseKey et deviceId"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Serveur"}),(0,s.jsx)(i.td,{children:"V\xe9rifie la validit\xe9 de la licence pour l'appareil"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsxs)(i.td,{children:["Re\xe7oit r\xe9ponse ",(0,s.jsx)(i.code,{children:'{ "valid": true, "message": "..." }'})]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Redirige vers /index (acc\xe8s autoris\xe9)"})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"sc\xe9narios-alternatifs",children:"Sc\xe9narios alternatifs"}),"\n",(0,s.jsx)(i.h3,{id:"sc\xe9nario-alternatif-1-mode-hors-ligne-pas-de-connexion-r\xe9seau",children:"Sc\xe9nario alternatif 1: Mode hors ligne (pas de connexion r\xe9seau)"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Condition initiale"})," : Pas de connexion internet disponible lors de la validation\r\n",(0,s.jsx)(i.strong,{children:"D\xe9clenchement"})," : Exception r\xe9seau lors de l'appel API /licenses/validate\r\n",(0,s.jsx)(i.strong,{children:"Actions"})," :"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Acteur"}),(0,s.jsx)(i.th,{children:"Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Tente la validation en ligne mais \xe9choue (timeout/erreur r\xe9seau)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Capture l'exception r\xe9seau"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Active le mode hors ligne (fallback)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Redirige vers /index sans validation serveur"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Application fonctionne avec les donn\xe9es locales"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Reprise"})," : L'application fonctionne normalement en mode hors ligne"]}),"\n",(0,s.jsx)(i.h3,{id:"sc\xe9nario-alternatif-2-licence-invalide-ou-expir\xe9e",children:"Sc\xe9nario alternatif 2: Licence invalide ou expir\xe9e"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Condition initiale"})," : La licence stock\xe9e n'est plus valide\r\n",(0,s.jsx)(i.strong,{children:"D\xe9clenchement"})," : R\xe9ponse serveur ",(0,s.jsx)(i.code,{children:'{ "valid": false }'})," lors de la validation\r\n",(0,s.jsx)(i.strong,{children:"Actions"})," :"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Acteur"}),(0,s.jsx)(i.th,{children:"Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Re\xe7oit r\xe9ponse de validation n\xe9gative"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Affiche le message d'erreur du serveur"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Redirige vers /license pour nouvelle activation"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Doit saisir une nouvelle cl\xe9 de licence valide"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Reprise"})," : Retour au sc\xe9nario d'activation de licence"]}),"\n",(0,s.jsx)(i.h3,{id:"sc\xe9nario-alternatif-3-\xe9chec-de-cr\xe9ation-de-compte",children:"Sc\xe9nario alternatif 3: \xc9chec de cr\xe9ation de compte"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Condition initiale"})," : Erreur lors de l'inscription (email d\xe9j\xe0 utilis\xe9, serveur indisponible)\r\n",(0,s.jsx)(i.strong,{children:"D\xe9clenchement"})," : Erreur HTTP lors de AuthService.RegisterAsync()\r\n",(0,s.jsx)(i.strong,{children:"Actions"})," :"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Acteur"}),(0,s.jsx)(i.th,{children:"Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Re\xe7oit erreur du serveur d'authentification"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Affiche message d'erreur sp\xe9cifique"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Maintient l'utilisateur sur la page d'inscription"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:"Corrige les informations (nouvel email) ou r\xe9essaie"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Reprise"})," : Retour au processus d'inscription"]}),"\n",(0,s.jsx)(i.h3,{id:"sc\xe9nario-alternatif-4-token-expir\xe9-lors-de-lutilisation",children:"Sc\xe9nario alternatif 4: Token expir\xe9 lors de l'utilisation"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Condition initiale"})," : Token expire pendant l'utilisation de l'application\r\n",(0,s.jsx)(i.strong,{children:"D\xe9clenchement"})," : AuthService.GetValidAccessTokenAsync() d\xe9tecte expiration\r\n",(0,s.jsx)(i.strong,{children:"Actions"})," :"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Acteur"}),(0,s.jsx)(i.th,{children:"Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"D\xe9tecte que l'accessToken est expir\xe9"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Utilise refreshToken pour obtenir un nouveau token"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Met \xe0 jour le token dans SecureStorage"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Continue l'op\xe9ration avec le nouveau token"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Si refresh \xe9choue, redirige vers /login"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Reprise"})," : Continuation normale ou re-authentification"]}),"\n",(0,s.jsx)(i.h3,{id:"sc\xe9nario-alternatif-5-suppression-des-donn\xe9es-utilisateur",children:"Sc\xe9nario alternatif 5: Suppression des donn\xe9es utilisateur"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Condition initiale"})," : L'utilisateur veut supprimer ses donn\xe9es locales\r\n",(0,s.jsx)(i.strong,{children:"D\xe9clenchement"}),' : Clic sur "Delete user" dans la page License\r\n',(0,s.jsx)(i.strong,{children:"Actions"})," :"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Acteur"}),(0,s.jsx)(i.th,{children:"Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Utilisateur"}),(0,s.jsx)(i.td,{children:'Clique "Delete user"'})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Ex\xe9cute SecureStorage.RemoveAll()"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Supprime userKey, tokens, licenseKey"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Syst\xe8me"}),(0,s.jsx)(i.td,{children:"Redirige vers /register au prochain lancement"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Reprise"})," : Nouveau processus d'inscription requis"]}),"\n",(0,s.jsx)(i.h2,{id:"diagramme-de-s\xe9quence",children:"Diagramme de s\xe9quence"}),"\n",(0,s.jsx)(i.mermaid,{value:'sequenceDiagram\r\n    participant U as Utilisateur\r\n    participant R as Redirect.razor\r\n    participant SS as SecureStorage\r\n    participant AS as AuthService\r\n    participant SA as Serveur Auth\r\n    participant SL as Serveur Licences\r\n    participant RF as RegisterForm\r\n    participant LF as LoginForm\r\n    participant AF as ActivationForm\r\n\r\n    Note over U,AF: Premier lancement - Cr\xe9ation de compte\r\n    U->>R: Lance RF.Go\r\n    R->>R: GetOrCreateDeviceIdentifier()\r\n    R->>SS: V\xe9rifie userKey, token, licenseKey\r\n    SS--\x3e>R: Aucune donn\xe9e trouv\xe9e\r\n    R->>RF: Navigate to /register\r\n    RF--\x3e>U: Affiche formulaire inscription\r\n    U->>RF: Saisit donn\xe9es + clique Register\r\n    RF->>AS: RegisterAsync(registrationModel)\r\n    AS->>SA: POST /auth/register\r\n    SA--\x3e>AS: { clientId, clientSecret }\r\n    AS->>SS: Store clientId/clientSecret\r\n    RF->>LF: Navigate to /login?from=register\r\n    LF--\x3e>U: "You received an email"\r\n\r\n    Note over U,AF: Connexion utilisateur\r\n    U->>LF: Saisit email/password + Login\r\n    LF->>SS: Get clientId/clientSecret\r\n    LF->>SA: POST /auth/login (OAuth2)\r\n    SA--\x3e>LF: { accessToken, refreshToken, user }\r\n    LF->>SS: Store tokens + user data\r\n    LF->>AF: Navigate to /license\r\n\r\n    Note over U,AF: Activation licence\r\n    U->>AF: Saisit licenseKey + Activate\r\n    AF->>AS: GetValidAccessTokenAsync()\r\n    AS--\x3e>AF: Valid accessToken\r\n    AF->>SL: POST /licenses/activate-and-validate\r\n    SL--\x3e>AF: { valid: true, message }\r\n    AF->>SS: Store licenseKey\r\n    AF->>R: Navigate to /index\r\n\r\n    Note over U,AF: Validation automatique\r\n    U->>R: Lance RF.Go (donn\xe9es pr\xe9sentes)\r\n    R->>SS: Get userKey, token, licenseKey\r\n    SS--\x3e>R: Toutes donn\xe9es disponibles\r\n    R->>AS: GetValidAccessTokenAsync()\r\n    AS--\x3e>R: Valid/refreshed token\r\n    R->>SL: POST /licenses/validate\r\n    SL--\x3e>R: { valid: true }\r\n    R->>R: Navigate to /index\r\n\r\n    alt Mode hors ligne\r\n        R->>SL: POST /licenses/validate\r\n        SL--\x3e>R: Timeout/Network Error\r\n        R->>R: Fallback mode offline\r\n        R->>R: Navigate to /index\r\n    end\r\n\r\n    alt Licence invalide\r\n        SL--\x3e>R: { valid: false }\r\n        R->>AF: Navigate to /license\r\n        AF--\x3e>U: Nouvelle activation requise\r\n    end'}),"\n",(0,s.jsx)(i.h2,{id:"diagramme-dactivit\xe9",children:"Diagramme d'activit\xe9"}),"\n",(0,s.jsx)(i.mermaid,{value:"flowchart TD\r\n    A[Lancement RF.Go] --\x3e B[Redirect.razor]\r\n    B --\x3e C[GetOrCreateDeviceIdentifier]\r\n    C --\x3e D[V\xe9rifier SecureStorage]\r\n    \r\n    D --\x3e E{userKey pr\xe9sent?}\r\n    E --\x3e|Non| F[Navigate to /register]\r\n    F --\x3e G[Afficher RegisterForm]\r\n    G --\x3e H[Utilisateur saisit donn\xe9es]\r\n    H --\x3e I[Valider formulaire]\r\n    I --\x3e J{Validation OK?}\r\n    J --\x3e|Non| K[Afficher erreurs]\r\n    K --\x3e H\r\n    J --\x3e|Oui| L[AuthService.RegisterAsync]\r\n    L --\x3e M{Inscription r\xe9ussie?}\r\n    M --\x3e|Non| N[Afficher erreur serveur]\r\n    N --\x3e H\r\n    M --\x3e|Oui| O[Store clientId/Secret]\r\n    O --\x3e P[Navigate to /login from=register]\r\n    \r\n    E --\x3e|Oui| Q{token pr\xe9sent?}\r\n    Q --\x3e|Non| P[Navigate to /login]\r\n    P --\x3e R[Afficher LoginForm]\r\n    R --\x3e S[Utilisateur saisit credentials]\r\n    S --\x3e T[Appel OAuth2 login]\r\n    T --\x3e U{Login r\xe9ussi?}\r\n    U --\x3e|Non| V[Afficher erreur login]\r\n    V --\x3e S\r\n    U --\x3e|Oui| W[Store tokens + user]\r\n    W --\x3e X{licenseKey pr\xe9sent?}\r\n    \r\n    Q --\x3e|Oui| X{licenseKey pr\xe9sent?}\r\n    X --\x3e|Non| Y[Navigate to /license]\r\n    Y --\x3e Z[Afficher ActivationForm]\r\n    Z --\x3e AA[Utilisateur saisit licenseKey]\r\n    AA --\x3e BB[POST activate-and-validate]\r\n    BB --\x3e CC{Activation r\xe9ussie?}\r\n    CC --\x3e|Non| DD[Afficher erreur licence]\r\n    DD --\x3e AA\r\n    CC --\x3e|Oui| EE[Store licenseKey]\r\n    EE --\x3e FF[Navigate to /index]\r\n    \r\n    X --\x3e|Oui| GG[GetValidAccessTokenAsync]\r\n    GG --\x3e HH[POST licenses/validate]\r\n    HH --\x3e II{Validation r\xe9ussie?}\r\n    II --\x3e|Non r\xe9seau| JJ[Mode offline]\r\n    JJ --\x3e FF\r\n    II --\x3e|Licence invalide| Y\r\n    II --\x3e|Oui| FF[Acc\xe8s application]\r\n    \r\n    FF --\x3e KK[Application principale]"}),"\n",(0,s.jsx)(i.h2,{id:"points-dextension",children:"Points d'extension"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Authentification biom\xe9trique"})," : Int\xe9gration Touch/Face ID pour authentification rapide"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Authentification \xe0 deux facteurs"})," : SMS ou authenticator app pour s\xe9curit\xe9 renforc\xe9e"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Gestion d'\xe9quipes"})," : Comptes organisationnels avec r\xf4les et permissions"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Synchronisation multi-appareils"})," : Partage de licences entre appareils d'une \xe9quipe"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Renouvellement automatique"})," : Notification et renouvellement automatique des licences"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"contraintes-techniques",children:"Contraintes techniques"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Les tokens utilisent le standard OAuth2 avec refresh token"}),"\n",(0,s.jsx)(i.li,{children:"Le stockage s\xe9curis\xe9 utilise SecureStorage.SetAsync() pour la persistance"}),"\n",(0,s.jsx)(i.li,{children:"L'identification d'appareil utilise GUID.GetOrCreateDeviceIdentifier() unique"}),"\n",(0,s.jsx)(i.li,{children:"Les headers API incluent X-API-KEY, X-USER-KEY, X-DEVICE-ID, X-LICENSE-KEY"}),"\n",(0,s.jsx)(i.li,{children:"Le mode hors ligne permet le fonctionnement sans validation serveur"}),"\n",(0,s.jsx)(i.li,{children:"La validation de licence se fait au d\xe9marrage et peut \xeatre rafra\xeechie dynamiquement"}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>c,x:()=>l});var r=n(6540);const s={},t=r.createContext(s);function c(e){const i=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(t.Provider,{value:i},e.children)}}}]);